{"remainingRequest":"E:\\study\\junior\\mooc\\shop\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\study\\junior\\mooc\\shop\\src\\components\\AddTeacher.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\study\\junior\\mooc\\shop\\src\\components\\AddTeacher.vue","mtime":1624332157264},{"path":"E:\\study\\junior\\mooc\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\study\\junior\\mooc\\shop\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\study\\junior\\mooc\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\study\\junior\\mooc\\shop\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBxcyBmcm9tICdxcycKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJBZGRUZWFjaGVyIiwKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIHRlYWNoZXI6ewogICAgICAgICAgICAgICAgLy8gbm90IG51bGwKICAgICAgICAgICAgICAgIG5hbWU6IiIsCiAgICAgICAgICAgICAgICAvLyBub3QgbnVsbAogICAgICAgICAgICAgICAgcGFzc3dvcmQ6IiIsCiAgICAgICAgICAgICAgICAvLyBub3QgbnVsbAogICAgICAgICAgICAgICAgdGVsOiIiLAogICAgICAgICAgICAgICAgLy8gbm90IG51bGwKICAgICAgICAgICAgICAgIGludHJvOiIiLAogICAgICAgICAgICAgICAgY2FyZWVyOiIiLAogICAgICAgICAgICAgICAgYXZhdGFyOiIiLAogICAgICAgICAgICAgICAgLy8gbm90IG51bGwKICAgICAgICAgICAgICAgIGxldmVsOiIiLAogICAgICAgICAgICAgICAgaWQ6IiIsCiAgICAgICAgICAgICAgICBzb3J0OiIiLy/orrLluIjnuqfliKsKICAgICAgICAgICAgfSwKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczp7CiAgICAgICAgc3VibWl0KCl7CgogICAgICAgIH0sCiAgICAgICAgY2hlY2tGb3JtKCl7CgogICAgICAgIH0sCiAgICAgICAgYWRkT3JVcGRhdGUoKSB7CiAgICAgICAgICAgIGlmKHRoaXMuY2hlY2tGb3JtKCkpewogICAgICAgICAgICAgICAgLy8g5Yik5pat5L+u5pS56L+Y5piv5re75YqgCiAgICAgICAgICAgICAgICAvLyDmoLnmja50ZWFjaGVy5piv5ZCm5pyJaWQKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJpZD0iLHRoaXMudGVhY2hlci5pZCkKICAgICAgICAgICAgICAgIGlmICh0aGlzLnRlYWNoZXIuaWQ9PT0iIikgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJhZGQiKQogICAgICAgICAgICAgICAgICAgIC8vIOa3u+WKoAogICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVGVhY2hlcigpCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJ1cGRhdGUiKQogICAgICAgICAgICAgICAgICAgIC8vIOS/ruaUuQogICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGVhY2hlcigpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgIGFsZXJ0KCLor7fmo4Dmn6Xkv6Hmga/loavlhpnmmK/lkKbmraPnoa4iKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB1cGxvYWRJbWFnZTpmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCLkvKDlm77niYciKQogICAgICAgICAgICBsZXQgZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTsKICAgICAgICAgICAgdGhhdC50ZWFjaGVyLmF2YXRhciA9IGZpbGUKICAgICAgICAgICAgY29uc29sZS5sb2coZmlsZSkKICAgICAgICAgICAgLy8gbGV0IG9iak5hbWUgPSBldmVudC50YXJnZXQubmFtZTsKICAgICAgICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsZmlsZSk7CiAgICAgICAgICAgIGxldCBjb25maWcgPSB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOnsnQ29udGVudC1UeXBlJzonbXVsdGlwYXJ0L2Zvcm0tZGF0YScsJ3Rva2VuJzpsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKX0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgY29uc29sZS5sb2coY29uZmlnKQogICAgICAgICAgICBheGlvcy5wb3N0KHRoYXQuR0xPQkFMLkFQSV9ST09UICsgJy9hcGkvb3NzL3VwbG9hZEF2YXRhcicsZm9ybURhdGEsY29uZmlnKQogICAgICAgICAgICAudGhlbihyZXNwb25zZT0+ewogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICB0aGF0LnRlYWNoZXIuYXZhdGFyID0gcmVzcG9uc2UuZGF0YS51cmw7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGF0LnRlYWNoZXIpCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBjaGFuZ2VMZXZlbDpmdW5jdGlvbihpKXsKICAgICAgICAgICAgdGhpcy50ZWFjaGVyLmxldmVsID0gaTsKICAgICAgICB9LAogICAgICAgIC8vIOS/ruaUueiusuW4iOeahOaWueazlQogICAgICAgIHVwZGF0ZVRlYWNoZXIoKSB7CiAgICAgICAgICAgIGxldCBjb25maWcgPSB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOnsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsJ3Rva2VuJzpsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKX0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgbGV0IHRoYXQgPSB0aGlzCiAgICAgICAgICAgIGF4aW9zLnBvc3QodGhpcy5HTE9CQUwuQVBJX1JPT1QrIi9hcGkvZWR1VGVhY2hlci91cGRhdGUiLHFzLnN0cmluZ2lmeSh0aGF0LnRlYWNoZXIpLGNvbmZpZykKICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSkKICAgICAgICAgICAgICAgICAgICAvLyDmj5DnpLrkv6Hmga8KICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5L+u5pS55oiQ5YqfIScKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC8vIOWbnuWIsOWIl+ihqOmhtemdoiDot6/nlLHot7PovawKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvdGVhY2hlcl9saXN0JyB9KQogICAgICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8vIOa3u+WKoOiusuW4iOeahOaWueazlQogICAgICAgIGFkZFRlYWNoZXIoKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCIxIit0aGlzLkdMT0JBTC5BUElfUk9PVCkKICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkodGhpcy50ZWFjaGVyKSkKICAgICAgICAgICAgbGV0IGNvbmZpZyA9IHsKICAgICAgICAgICAgICAgIGhlYWRlcnM6eydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJywndG9rZW4nOmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpfQogICAgICAgICAgICB9OwogICAgICAgICAgICBsZXQgdGhhdCA9IHRoaXMKICAgICAgICAgICAgLy8gdGhpcy4kaHR0cC5wb3N0KHRoYXQuR0xPQkFMLkFQSV9ST09UICsgIi9hcGkvYWRkX2ltYWdlIixmb3JtRGF0YSxjb25maWcpCiAgICAgICAgICAgIGF4aW9zLnBvc3QodGhhdC5HTE9CQUwuQVBJX1JPT1QrICIvYXBpL2VkdVRlYWNoZXIvYWRkVGVhY2hlciIscXMuc3RyaW5naWZ5KHRoYXQudGVhY2hlciksY29uZmlnKS50aGVuKHJlc3BvbnNlID0+IHsgLy8g5re75Yqg5oiQ5YqfCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlcz0nLHJlc3BvbnNlKQogICAgICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEuY29kZSA9PT0gMjAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuaIkOWKnyIpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWbnuWIsOWIl+ihqOmhtemdoiDot6/nlLHot7PovawKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAnL3RlYWNoZXJfbGlzdCcgfSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLlpLHotKUiKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBlcnI9PnsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIua3u+WKoOWksei0pSIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkKICAgICAgICB9LAogICAgICAgIC8vIOagueaNrmlk5p+l6K+i6K6y5biICiAgICAgICAgZ2V0VGVhY2hlckluZm8oaWQpIHsKICAgICAgICAgICAgYXhpb3MuZ2V0KHRoaXMuR0xPQkFMLkFQSV9ST09UKyAiL2FwaS9lZHVUZWFjaGVyL2dldFRlYWNoZXJCeUlkLyIsewogICAgICAgICAgICAgICAgaWQ6aWQKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgfQp9Cg=="},{"version":3,"sources":["AddTeacher.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddTeacher.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"container-fluid\" >\r\n\r\n        <div class=\"row\">\r\n            <div class=\"col-lg-12\">\r\n                <div class=\"card\">\r\n                    <div class=\"tab-content\">\r\n<!--                        <div class=\"tab-pane active\">-->\r\n<!--                            <form name=\"edit-form\" class=\"edit-form\" >-->\r\n                            <small class=\"help-block\">标星号为必填字段</small>\r\n                                <div class=\"form-group\">\r\n                                    <label for=\"name\">讲师名称*</label>\r\n                                    <input class=\"form-control\" type=\"text\" name=\"name\" id=\"name\" v-model=\"teacher.name\" placeholder=\"请输入姓名\" >\r\n                                </div>\r\n                                <div class=\"form-group\">\r\n                                    <label for=\"password\">密码*</label>\r\n                                    <input class=\"form-control\" type=\"text\" name=\"password\" id=\"password\" v-model=\"teacher.password\" placeholder=\"请输入密码\" />\r\n                                </div>\r\n                                <div class=\"form-group\">\r\n                                    <label for=\"tel\">电话*</label>\r\n                                    <input class=\"form-control\" type=\"text\" name=\"tel\" id=\"tel\" v-model=\"teacher.tel\" placeholder=\"请输入电话\" />\r\n                                </div>\r\n                                <div class=\"form-group\">\r\n                                    <label for=\"intro\">教师简介*</label>\r\n                                    <textarea class=\"form-control\" rows=\"5\" name=\"intro\" id=\"intro\" v-model=\"teacher.intro\" placeholder=\"请输入简介\"/>\r\n                                </div>\r\n                                <div class=\"form-group\">\r\n                                    <label for=\"career\">教育经历</label>\r\n                                    <textarea class=\"form-control\" rows=\"3\" id=\"career\" name=\"career\" v-model=\"teacher.career\" placeholder=\"请输入教师的生涯简介\"/>\r\n                                    <small class=\"help-block\">无需填写全部，仅最近几段即可</small>\r\n                                </div>\r\n                                <div class=\"form-group\">\r\n                                    <label for=\"example-select\">讲师级别</label>\r\n                                    <div>\r\n                                        <select class=\"form-control\" v-model=\"teacher.sort\" id=\"example-select\" name=\"example-select\" size=\"1\">\r\n<!--                                            <option value=\"0\">请选择</option>-->\r\n                                            <option value=\"1\">1级：初级</option>\r\n                                            <option value=\"2\">2级：中级</option>\r\n                                            <option value=\"3\">3级：高级</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"form-group\">\r\n                                    <label >教师头衔*</label>\r\n                                    <div class=\"example-box\">\r\n                                        <label class=\"lyear-radio radio-inline radio-primary\">\r\n                                            <input type=\"radio\"  @click=\"changeLevel(0)\" name=\"level\"><span>高级讲师</span>\r\n                                        </label>\r\n                                        <label class=\"lyear-radio radio-inline radio-primary\">\r\n                                            <input type=\"radio\"  @click=\"changeLevel(1)\" name=\"level\"><span>首席讲师</span>\r\n                                        </label>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"form-group\">\r\n                                    <label for=\"avatar\">头像</label>\r\n                                    <div class=\"input-group\">\r\n<!--                                        <img :src=\"`${teacher.avatar}?x-oss-process=image/resize,h_100,m_lfit`\">-->\r\n                                        <input type=\"file\" @change=\"uploadImage\" class=\"form-control\" name=\"avatar\" id=\"avatar\"/>\r\n<!--                                        <input type=\"text\" class=\"form-control\" name=\"avatar\" id=\"avatar\"/>-->\r\n<!--                                        <div class=\"input-group-btn\"><button class=\"btn btn-default\" type=\"button\">上传图片</button></div>-->\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class=\"form-group\" >\r\n                                    <button @click=\"addOrUpdate\"  class=\"btn btn-default\">确 定</button>\r\n                                    <button type=\"button\" class=\"btn btn-default\" onclick=\"javascript:history.back(-1);return false;\">返 回</button>\r\n                                </div>\r\n<!--                            </form>-->\r\n\r\n<!--                        </div>-->\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import qs from 'qs'\r\n    import axios from \"axios\";\r\n\r\n    export default {\r\n        name: \"AddTeacher\",\r\n        data(){\r\n            return{\r\n                teacher:{\r\n                    // not null\r\n                    name:\"\",\r\n                    // not null\r\n                    password:\"\",\r\n                    // not null\r\n                    tel:\"\",\r\n                    // not null\r\n                    intro:\"\",\r\n                    career:\"\",\r\n                    avatar:\"\",\r\n                    // not null\r\n                    level:\"\",\r\n                    id:\"\",\r\n                    sort:\"\"//讲师级别\r\n                },\r\n            }\r\n        },\r\n        methods:{\r\n            submit(){\r\n\r\n            },\r\n            checkForm(){\r\n\r\n            },\r\n            addOrUpdate() {\r\n                if(this.checkForm()){\r\n                    // 判断修改还是添加\r\n                    // 根据teacher是否有id\r\n                    console.log(\"id=\",this.teacher.id)\r\n                    if (this.teacher.id===\"\") {\r\n                        console.log(\"add\")\r\n                        // 添加\r\n                        this.addTeacher()\r\n                    } else {\r\n                        console.log(\"update\")\r\n                        // 修改\r\n                        this.updateTeacher()\r\n                    }\r\n                }\r\n                else{\r\n                    alert(\"请检查信息填写是否正确\")\r\n                }\r\n            },\r\n            uploadImage:function (event) {\r\n                var that = this\r\n                console.log(\"传图片\")\r\n                let file = event.target.files[0];\r\n                that.teacher.avatar = file\r\n                console.log(file)\r\n                // let objName = event.target.name;\r\n                let formData = new FormData();\r\n                formData.append('file',file);\r\n                let config = {\r\n                    headers:{'Content-Type':'multipart/form-data','token':localStorage.getItem(\"token\")}\r\n                };\r\n                console.log(config)\r\n                axios.post(that.GLOBAL.API_ROOT + '/api/oss/uploadAvatar',formData,config)\r\n                .then(response=>{\r\n                    console.log(response.data);\r\n                    that.teacher.avatar = response.data.url;\r\n                    console.log(that.teacher)\r\n                })\r\n            },\r\n            changeLevel:function(i){\r\n                this.teacher.level = i;\r\n            },\r\n            // 修改讲师的方法\r\n            updateTeacher() {\r\n                let config = {\r\n                    headers:{'Content-Type': 'application/x-www-form-urlencoded','token':localStorage.getItem(\"token\")}\r\n                };\r\n                let that = this\r\n                axios.post(this.GLOBAL.API_ROOT+\"/api/eduTeacher/update\",qs.stringify(that.teacher),config)\r\n                    .then(response => {\r\n                        console.log(response)\r\n                        // 提示信息\r\n                        this.$message({\r\n                            type: 'success',\r\n                            message: '修改成功!'\r\n                        })\r\n                        // 回到列表页面 路由跳转\r\n                        this.$router.push({ path: '/teacher_list' })\r\n                    })\r\n            },\r\n            // 添加讲师的方法\r\n            addTeacher() {\r\n                console.log(\"1\"+this.GLOBAL.API_ROOT)\r\n                console.log(JSON.stringify(this.teacher))\r\n                let config = {\r\n                    headers:{'Content-Type': 'application/x-www-form-urlencoded','token':localStorage.getItem(\"token\")}\r\n                };\r\n                let that = this\r\n                // this.$http.post(that.GLOBAL.API_ROOT + \"/api/add_image\",formData,config)\r\n                axios.post(that.GLOBAL.API_ROOT+ \"/api/eduTeacher/addTeacher\",qs.stringify(that.teacher),config).then(response => { // 添加成功\r\n                        console.log('res=',response)\r\n                        if(response.data.code === 200){\r\n                            alert(\"成功\")\r\n                            // 回到列表页面 路由跳转\r\n                            this.$router.push({ path: '/teacher_list' })\r\n                        }\r\n                        else {\r\n                            alert(\"失败\")\r\n                        }\r\n                    },\r\n                    err=>{\r\n                        console.log(err)\r\n                        alert(\"添加失败\")\r\n                    }\r\n                )\r\n            },\r\n            // 根据id查询讲师\r\n            getTeacherInfo(id) {\r\n                axios.get(this.GLOBAL.API_ROOT+ \"/api/eduTeacher/getTeacherById/\",{\r\n                    id:id\r\n                })\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}